# Dockerfile para Lambda Container com Ollama
FROM public.ecr.aws/lambda/python:3.11

# Instalar dependências do sistema
RUN yum update -y && \
    yum install -y curl && \
    yum clean all

# Instalar Ollama
RUN curl -fsSL https://ollama.com/install.sh | sh

# Copiar código da aplicação
COPY src/ ${LAMBDA_TASK_ROOT}/

# Instalar dependências Python
RUN pip install -r requirements.txt

# Configurar variáveis de ambiente
ENV OLLAMA_HOST=0.0.0.0:11434
ENV MODEL_NAME=llama2:7b

# Comando para iniciar Ollama e Lambda
CMD ["lambda_function.lambda_handler"]
